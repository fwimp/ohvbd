<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Citing data retrieved using ohvbd • ohvbd</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Citing data retrieved using ohvbd">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ohvbd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/citations.html">Citing data retrieved using ohvbd</a></li>
    <li><a class="dropdown-item" href="../articles/retrieving-data.html">Retrieving data from VectorByte</a></li>
    <li><a class="dropdown-item" href="../articles/use-areadata.html">Sourcing climatic data from AREAdata</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fwimp/ohvbd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Citing data retrieved using ohvbd</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/fwimp/ohvbd/blob/master/vignettes/citations.Rmd" class="external-link"><code>vignettes/citations.Rmd</code></a></small>
      <div class="d-none name"><code>citations.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="citations">Citations<a class="anchor" aria-label="anchor" href="#citations"></a>
</h2>
<p>Naturally, when performing scientific research, citation is an
important part of the process. It is important that data generators (and
curators) recieve appropriate citation for their work, upon which future
work is based.</p>
<p>Often, however, the lifecycle of external data within a project can
lead to times when data becomes somewhat divorced from its origins.</p>
<p>For example if a dataset was downloaded from a data source, then
transformed and the minimal essential columns joined onto another
dataset, it may no longer be straightforward to work out where the data
originated.</p>
</div>
<div class="section level2">
<h2 id="ohvbd-citation-tools">
<code>ohvbd</code> citation tools<a class="anchor" aria-label="anchor" href="#ohvbd-citation-tools"></a>
</h2>
<p>The <code>ohvbd</code> package provides certain tools to make it
easier to derive the sources of data used in one’s analysis, provided
that certain columns are retained.</p>
<div class="section level3">
<h3 id="a-basic-example">A basic example<a class="anchor" aria-label="anchor" href="#a-basic-example"></a>
</h3>
<p>As a simple example, let’s imagine that previously we downloaded data
from vectraits with the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fwimp/ohvbd" class="external-link">ohvbd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_hub.html">search_hub</a></span><span class="op">(</span><span class="st">"Aedes aegypti"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_db.html">filter_db</a></span><span class="op">(</span><span class="st">"vt"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/glean.html">glean</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">DatasetID</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 474 475 148 578 126</span></span></code></pre>
<p>Given that we have not filtered any columns out, this dataset
contains all the citation columns as-is.</p>
<p>As such we can simply extract these columns as is using the
<code><a href="../reference/fetch_citations.html">fetch_citations()</a></code> function. This is by far the simplest
scenario.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/fetch_citations.html">fetch_citations</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##   DatasetID                                                                                                                                                                               Citation</span></span>
<span><span class="co">## 1       474                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 2       475                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 3       148                                                   Gulia-Nuss et al. 2015. Multiple factors contribute to anautogenous reproduction by the mosquito Aedes aegypti. J Insect Physiol. 82</span></span>
<span><span class="co">## 4       578                                         Huxley et al. 2022. Competition and resource depletion shape the thermal response of population fitness in Aedes aegypti. Commun. Biol. 5: 66.</span></span>
<span><span class="co">## 5       126 Goindin et al. 2015. Parity and longevity of Aedes aegypti according to temperatures in controlled conditions and consequences on dengue transmission risks. PLoS ONE 10(8): e0135489.</span></span>
<span><span class="co">##                                                                                                                                                                                           CuratedByCitation</span></span>
<span><span class="co">## 1 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 2 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 3 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 4                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">## 5                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">##                 CuratedByDOI                            DOI SubmittedBy ContributorEmail</span></span>
<span><span class="co">## 1 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 2 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 3 10.1038/s41559-023-02301-8 10.1016/j.jinsphys.2015.08.001 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 4                       &lt;NA&gt;     10.1038/s42003-022-03030-7 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 5                       &lt;NA&gt;   10.1371/journal.pone.0135489 Paul Huxley phuxly@gmail.com</span></span></code></pre>
<p>If you look closely at the output, you should see that a couple of
these datasets are derived from the same paper.</p>
<p>You may only want a list of all the citations present in your
dataset, in which case the <code>minimise</code> argument to
<code><a href="../reference/fetch_citations.html">fetch_citations()</a></code> can be used:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/fetch_citations.html">fetch_citations</a></span><span class="op">(</span>minimise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##                                                                                                                                                                                 Citation</span></span>
<span><span class="co">## 1                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 2                                                   Gulia-Nuss et al. 2015. Multiple factors contribute to anautogenous reproduction by the mosquito Aedes aegypti. J Insect Physiol. 82</span></span>
<span><span class="co">## 3                                         Huxley et al. 2022. Competition and resource depletion shape the thermal response of population fitness in Aedes aegypti. Commun. Biol. 5: 66.</span></span>
<span><span class="co">## 4 Goindin et al. 2015. Parity and longevity of Aedes aegypti according to temperatures in controlled conditions and consequences on dengue transmission risks. PLoS ONE 10(8): e0135489.</span></span>
<span><span class="co">##                                                                                                                                                                                           CuratedByCitation</span></span>
<span><span class="co">## 1 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 2 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 3                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">## 4                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">##                 CuratedByDOI                            DOI SubmittedBy ContributorEmail</span></span>
<span><span class="co">## 1 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 2 10.1038/s41559-023-02301-8 10.1016/j.jinsphys.2015.08.001 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 3                       &lt;NA&gt;     10.1038/s42003-022-03030-7 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 4                       &lt;NA&gt;   10.1371/journal.pone.0135489 Paul Huxley phuxly@gmail.com</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="missing-columns">Missing columns<a class="anchor" aria-label="anchor" href="#missing-columns"></a>
</h3>
<p>At some point during the download process, or during later steps, you
may have filtered out some of the citation columns:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_hub.html">search_hub</a></span><span class="op">(</span><span class="st">"Aedes aegypti"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_db.html">filter_db</a></span><span class="op">(</span><span class="st">"vt"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/glean.html">glean</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"DatasetID"</span>,</span>
<span>    <span class="st">"Interactor1"</span>,</span>
<span>    <span class="st">"OriginalTraitName"</span>,</span>
<span>    <span class="st">"OriginalTraitValue"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##   DatasetID   Interactor1 OriginalTraitName OriginalTraitValue</span></span>
<span><span class="co">## 1       474 Aedes aegypti    fecundity rate               0.00</span></span>
<span><span class="co">## 2       474 Aedes aegypti    fecundity rate               0.00</span></span>
<span><span class="co">## 3       474 Aedes aegypti    fecundity rate               0.35</span></span>
<span><span class="co">## 4       474 Aedes aegypti    fecundity rate               1.12</span></span>
<span><span class="co">## 5       474 Aedes aegypti    fecundity rate               3.37</span></span>
<span><span class="co">## 6       474 Aedes aegypti    fecundity rate               3.59</span></span></code></pre>
<p>Here we don’t have the citation columns to hand, however because we
have the <em>“DatasetID”</em> column intact, <code>ohvbd</code> can use
this to retrieve the citations again!</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/fetch_citations.html">fetch_citations</a></span><span class="op">(</span>minimise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##                                                                                                                                                                                 Citation</span></span>
<span><span class="co">## 1                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 2                                                   Gulia-Nuss et al. 2015. Multiple factors contribute to anautogenous reproduction by the mosquito Aedes aegypti. J Insect Physiol. 82</span></span>
<span><span class="co">## 3                                         Huxley et al. 2022. Competition and resource depletion shape the thermal response of population fitness in Aedes aegypti. Commun. Biol. 5: 66.</span></span>
<span><span class="co">## 4 Goindin et al. 2015. Parity and longevity of Aedes aegypti according to temperatures in controlled conditions and consequences on dengue transmission risks. PLoS ONE 10(8): e0135489.</span></span>
<span><span class="co">##                                                                                                                                                                                           CuratedByCitation</span></span>
<span><span class="co">## 1 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 2 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 3                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">## 4                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">##                 CuratedByDOI                            DOI SubmittedBy ContributorEmail</span></span>
<span><span class="co">## 1 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 2 10.1038/s41559-023-02301-8 10.1016/j.jinsphys.2015.08.001 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 3                       &lt;NA&gt;     10.1038/s42003-022-03030-7 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 4                       &lt;NA&gt;   10.1371/journal.pone.0135489 Paul Huxley phuxly@gmail.com</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="orphaned-data">Orphaned data<a class="anchor" aria-label="anchor" href="#orphaned-data"></a>
</h3>
<p>If you perform certain actions on your dataset (such as saving to and
retrieving from a csv, or some data filtering processes) you may end up
losing the attribute that internally tells <code>ohvbd</code> where the
data came from.</p>
<p>For example, let’s take a our <code>df</code> dataset and run the
select function from dplyr on it:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_filtered</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"DatasetID"</span>,</span>
<span>    <span class="st">"Interactor1"</span>,</span>
<span>    <span class="st">"OriginalTraitName"</span>,</span>
<span>    <span class="st">"OriginalTraitValue"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_filtered</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: </span></span>
<span><span class="co">##   DatasetID   Interactor1 OriginalTraitName OriginalTraitValue</span></span>
<span><span class="co">## 1       474 Aedes aegypti    fecundity rate               0.00</span></span>
<span><span class="co">## 2       474 Aedes aegypti    fecundity rate               0.00</span></span>
<span><span class="co">## 3       474 Aedes aegypti    fecundity rate               0.35</span></span>
<span><span class="co">## 4       474 Aedes aegypti    fecundity rate               1.12</span></span>
<span><span class="co">## 5       474 Aedes aegypti    fecundity rate               3.37</span></span>
<span><span class="co">## 6       474 Aedes aegypti    fecundity rate               3.59</span></span></code></pre>
<p>If we inspect the resultant object using the <code><a href="../reference/has_db.html">has_db()</a></code>
function, we can see that it has lost its database marker:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/has_db.html">has_db</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/has_db.html">has_db</a></span><span class="op">(</span><span class="va">df_filtered</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] FALSE</span></span></code></pre>
<p>There are a few ways we can clear this up.</p>
<p>The first option would be to just redownload the specific datasets as
they were downloaded before:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ohvbd.ids.html">ohvbd.ids</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df_filtered</span><span class="op">$</span><span class="va">DatasetID</span><span class="op">)</span>, <span class="st">"vt"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/glean.html">glean</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch_citations.html">fetch_citations</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##   DatasetID                                                                                                                                                                               Citation</span></span>
<span><span class="co">## 1       474                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 2       475                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 3       148                                                   Gulia-Nuss et al. 2015. Multiple factors contribute to anautogenous reproduction by the mosquito Aedes aegypti. J Insect Physiol. 82</span></span>
<span><span class="co">## 4       578                                         Huxley et al. 2022. Competition and resource depletion shape the thermal response of population fitness in Aedes aegypti. Commun. Biol. 5: 66.</span></span>
<span><span class="co">## 5       126 Goindin et al. 2015. Parity and longevity of Aedes aegypti according to temperatures in controlled conditions and consequences on dengue transmission risks. PLoS ONE 10(8): e0135489.</span></span>
<span><span class="co">##                                                                                                                                                                                           CuratedByCitation</span></span>
<span><span class="co">## 1 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 2 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 3 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 4                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">## 5                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">##                 CuratedByDOI                            DOI SubmittedBy ContributorEmail</span></span>
<span><span class="co">## 1 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 2 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 3 10.1038/s41559-023-02301-8 10.1016/j.jinsphys.2015.08.001 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 4                       &lt;NA&gt;     10.1038/s42003-022-03030-7 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 5                       &lt;NA&gt;   10.1371/journal.pone.0135489 Paul Huxley phuxly@gmail.com</span></span></code></pre>
<p>To make this easier, <code><a href="../reference/fetch_citations.html">fetch_citations()</a></code> will
(grumblingly) accept an <code>ohvbd.ids</code> object:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ohvbd.ids.html">ohvbd.ids</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df_filtered</span><span class="op">$</span><span class="va">DatasetID</span><span class="op">)</span>, <span class="st">"vt"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch_citations.html">fetch_citations</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##   DatasetID                                                                                                                                                                               Citation</span></span>
<span><span class="co">## 1       474                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 2       475                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 3       148                                                   Gulia-Nuss et al. 2015. Multiple factors contribute to anautogenous reproduction by the mosquito Aedes aegypti. J Insect Physiol. 82</span></span>
<span><span class="co">## 4       578                                         Huxley et al. 2022. Competition and resource depletion shape the thermal response of population fitness in Aedes aegypti. Commun. Biol. 5: 66.</span></span>
<span><span class="co">## 5       126 Goindin et al. 2015. Parity and longevity of Aedes aegypti according to temperatures in controlled conditions and consequences on dengue transmission risks. PLoS ONE 10(8): e0135489.</span></span>
<span><span class="co">##                                                                                                                                                                                           CuratedByCitation</span></span>
<span><span class="co">## 1 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 2 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 3 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 4                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">## 5                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">##                 CuratedByDOI                            DOI SubmittedBy ContributorEmail</span></span>
<span><span class="co">## 1 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 2 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 3 10.1038/s41559-023-02301-8 10.1016/j.jinsphys.2015.08.001 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 4                       &lt;NA&gt;     10.1038/s42003-022-03030-7 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 5                       &lt;NA&gt;   10.1371/journal.pone.0135489 Paul Huxley phuxly@gmail.com</span></span></code></pre>
<div class="section level4">
<h4 id="forcing-the-db">Forcing the db<a class="anchor" aria-label="anchor" href="#forcing-the-db"></a>
</h4>
<p>Alternatively, if you know the dataset is intact and has just lost
its database tag, you can force-apply that tag again using the
<code><a href="../reference/force_db.html">force_db()</a></code> function!</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_filtered</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/force_db.html">force_db</a></span><span class="op">(</span><span class="st">"vt"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch_citations.html">fetch_citations</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ohvbd.data.frame&gt;</span></span>
<span><span class="co">## Database: vt</span></span>
<span><span class="co">##   DatasetID                                                                                                                                                                               Citation</span></span>
<span><span class="co">## 1       474                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 2       475                                           Yang et al. 2009. Assessing the effects of temperature on the population of Aedes aegypti the vector of dengue. Epidemiology &amp; Infection 137</span></span>
<span><span class="co">## 3       148                                                   Gulia-Nuss et al. 2015. Multiple factors contribute to anautogenous reproduction by the mosquito Aedes aegypti. J Insect Physiol. 82</span></span>
<span><span class="co">## 4       578                                         Huxley et al. 2022. Competition and resource depletion shape the thermal response of population fitness in Aedes aegypti. Commun. Biol. 5: 66.</span></span>
<span><span class="co">## 5       126 Goindin et al. 2015. Parity and longevity of Aedes aegypti according to temperatures in controlled conditions and consequences on dengue transmission risks. PLoS ONE 10(8): e0135489.</span></span>
<span><span class="co">##                                                                                                                                                                                           CuratedByCitation</span></span>
<span><span class="co">## 1 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 2 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 3 Pawar, S., Huxley, P.J., Smallwood, T.R.C. et al. Variation in temperature of peak trait performance constrains adaptation of arthropod populations to climatic warming. Nat Ecol Evol 8, 500–510 (2024).</span></span>
<span><span class="co">## 4                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">## 5                                                                                                                                                                                                      &lt;NA&gt;</span></span>
<span><span class="co">##                 CuratedByDOI                            DOI SubmittedBy ContributorEmail</span></span>
<span><span class="co">## 1 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 2 10.1038/s41559-023-02301-8      10.1017/S0950268809002040 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 3 10.1038/s41559-023-02301-8 10.1016/j.jinsphys.2015.08.001 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 4                       &lt;NA&gt;     10.1038/s42003-022-03030-7 Paul Huxley phuxly@gmail.com</span></span>
<span><span class="co">## 5                       &lt;NA&gt;   10.1371/journal.pone.0135489 Paul Huxley phuxly@gmail.com</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="missing-dataset-ids">Missing Dataset IDs<a class="anchor" aria-label="anchor" href="#missing-dataset-ids"></a>
</h3>
<p>Unfortunately if you also removed the Dataset ID column from your
data at some point, it is very hard to easily retrieve the
citations.</p>
<p>As such it is <em>highly recommended</em> that you build
citation-retrieval into your initial data download pipeline in some
form.</p>
</div>
</div>
<div class="section level2">
<h2 id="retrieving-gbif-citations">Retrieving GBIF citations<a class="anchor" aria-label="anchor" href="#retrieving-gbif-citations"></a>
</h2>
<p>Currently <code><a href="../reference/fetch_citations.html">fetch_citations()</a></code> does not directly support
GBIF downloads, however <code>ohvbd</code> does provide a tool to help
with using the <code>rgbif</code> citation retrieval mechanism.</p>
<p>To retrieve a citation from GBIF using rgbif you need to use the
output of <code>fetch_gibf()</code>. If you are piping your commands
together this can pose an issue as you need to retrieve the data from
the middle of the pipeline for later use.</p>
<p>This is where the <code><a href="../reference/tee.html">tee()</a></code> command comes in handy.</p>
<p>It allows you intercept and extract the data from the the middle of a
pipeline for later use. In this case let’s extract the output of
<code><a href="../reference/fetch.html">fetch()</a></code> into a variable called “gbif_cite”.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gbif_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_hub.html">search_hub</a></span><span class="op">(</span><span class="st">"Ixodes"</span>, <span class="st">"gbif"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fetch.html">fetch</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tee.html">tee</a></span><span class="op">(</span><span class="st">"gbif_cite"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/glean.html">glean</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now, given that <code><a href="../reference/fetch_gbif.html">fetch_gbif()</a></code> returns a list, depending
on the number of datasets returned we have multiple options on how to
proceed.</p>
<p>For a single dataset (which will nearly always be the case) we can
just access the first entry of the list by indexing:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rgbif" class="external-link">rgbif</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rgbif</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/gbif_citation.html" class="external-link">gbif_citation</a></span><span class="op">(</span><span class="va">gbif_cite</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $download</span></span>
<span><span class="co">## [1] "GBIF Occurrence Download https://doi.org/10.15468/dl.6ubuz9 Accessed from R via rgbif (https://github.com/ropensci/rgbif) on 2025-10-27"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $datasets</span></span>
<span><span class="co">## list()</span></span></code></pre>
<p>Alternatively to deal with multiple datasets, we would have to use
lapply instead to run <code><a href="https://docs.ropensci.org/rgbif/reference/gbif_citation.html" class="external-link">gbif_citation()</a></code> on every entry:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">gbif_cite</span>, <span class="fu">rgbif</span><span class="fu">::</span><span class="va"><a href="https://docs.ropensci.org/rgbif/reference/gbif_citation.html" class="external-link">gbif_citation</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## [[1]]$download</span></span>
<span><span class="co">## [1] "GBIF Occurrence Download https://doi.org/10.15468/dl.6ubuz9 Accessed from R via rgbif (https://github.com/ropensci/rgbif) on 2025-10-27"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## [[1]]$datasets</span></span>
<span><span class="co">## list()</span></span></code></pre>
<p><span style="opacity: 0.1;font-size: small;">Built in
15.3356099s</span></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Francis Windram.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
